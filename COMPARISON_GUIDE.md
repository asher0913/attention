# CEM架构对比实验指南

## 🎯 实验目的

在完全相同的实验条件下对比：
- **CEM-main**: 原始GMM计算条件熵损失
- **CEM-mix**: GMM + Attention混合架构计算条件熵损失

## ⚙️ 实验配置

- **数据集**: CIFAR-10
- **λ (lambda)**: 16
- **正则化强度**: 0.025  
- **训练轮数**: 240
- **其他参数**: 完全一致，确保对比公平性

## 🚀 使用方法

### 方法1: 一键运行 (推荐)
```bash
cd /path/to/attention
bash run_comparison.sh
```

### 方法2: 直接运行Python脚本
```bash
cd /path/to/attention
python compare_cem_architectures.py
```

## 📊 输出结果

### 自动生成的文件
1. **`CEM_Comparison_Report_*.md`** - 详细对比报告
2. **`cem_comparison_results_*.json`** - 原始实验数据
3. **`CEM-main_experiment_log.txt`** - CEM-main实验日志
4. **`CEM-mix_experiment_log.txt`** - CEM-mix实验日志

### 报告内容
- 📈 训练性能对比 (准确度、训练时间)
- 🛡️ 防御性能对比 (MSE、SSIM、PSNR)
- 🏗️ 架构分析
- 🎯 技术创新点
- 💡 应用建议

## ⏱️ 预期运行时间

- **总时间**: 约6-10小时 (取决于硬件)
- **CEM-main**: 约3-5小时
- **CEM-mix**: 约3-5小时 (混合架构可能稍长)

## 🔧 实验保证

### 完全一致的条件
✅ 相同的随机种子 (125)  
✅ 相同的网络架构  
✅ 相同的训练参数  
✅ 相同的数据预处理  
✅ 相同的优化器配置  

### 唯一差异
🎯 **条件熵损失计算方式**:
- CEM-main: 纯GMM聚类
- CEM-mix: GMM + Attention自适应融合

## 📋 实验流程

```
1. 环境检查 ✅
   ├── 检查Python环境
   ├── 验证项目目录
   └── 清理之前结果

2. CEM-main实验 🔥
   ├── 标准化参数设置
   ├── 240轮训练
   ├── 模型反演攻击测试
   └── 结果提取

3. CEM-mix实验 🔥  
   ├── 标准化参数设置
   ├── 240轮训练
   ├── 模型反演攻击测试
   └── 结果提取

4. 对比分析 📊
   ├── 性能指标计算
   ├── 改进百分比分析
   └── 统计显著性评估

5. 报告生成 📝
   ├── Markdown详细报告
   ├── JSON原始数据
   └── 实验日志保存
```

## 🛠️ 故障排除

### 常见问题
1. **CUDA错误**: 确保GPU可用且显存充足
2. **数据集错误**: 确保CIFAR-10数据集可以正常下载
3. **依赖问题**: 检查PyTorch、torchvision等是否正确安装

### 错误日志
查看生成的日志文件了解详细错误信息：
- `CEM-main_experiment_log.txt`
- `CEM-mix_experiment_log.txt`

## 📈 结果解读

### 性能指标
- **准确度提升**: 正值表示CEM-mix更优
- **MSE降低**: 正值表示CEM-mix防御更强
- **SSIM/PSNR**: 在防御场景中，较低值表示更好的隐私保护

### 符号说明
- 📈 性能提升
- 📉 性能下降  
- ➖ 性能相近
- 🛡️ 防御增强
- ⚠️ 需要关注
- ⏰ 时间增加
- ⚡ 时间减少

---

**注意**: 实验需要较长时间，建议在服务器环境运行。脚本会自动保存所有结果，即使中途中断也可以查看已完成部分的日志。
